# 記事作成コスト試算

## 使用しているAPIとモデル

### 1. Anthropic Claude API
- **モデル**: `claude-sonnet-4-20250514`
- **料金**:
  - Input: $3.00 / 100万トークン ($0.003 / 1,000トークン)
  - Output: $15.00 / 100万トークン ($0.015 / 1,000トークン)
  - 200,000トークン超: Input $6.00 / 100万トークン、Output $22.50 / 100万トークン

### 2. Google Gemini API
- **Gemini Live** (`gemini-2.5-flash-native-audio-preview-09-2025`):
  - Input (Audio): $3.00 / 100万トークン
  - Output (Audio): $12.00 / 100万トークン
  - Output (Text): $2.00 / 100万トークン
- **画像生成** (`gemini-3-pro-image-preview`):
  - 1K/2K画像: $0.134 / 画像
  - 4K画像: $0.24 / 画像
- **Grounding検索** (`gemini-2.0-flash`):
  - Input: $0.50 / 100万トークン
  - Output: $2.00 / 100万トークン

### 3. ElevenLabs TTS (オプション)
- 現在は使用していない（将来の拡張用）

---

## 記事作成の流れと使用量推定

### 想定シナリオ
- **対話時間**: 10分（平均）
- **会話発言数**: 20-30発言（MC + ゲスト）
- **会話文字数**: 約3,000-5,000文字（日本語）
- **生成記事文字数**: 3,000-4,500文字

---

## コスト内訳（1記事あたり）

### 1. Gemini Live（リアルタイム対話）
**使用**: 収録中、リアルタイムで音声対話

**推定使用量**:
- 対話時間: 10分
- 音声入力: 約5分分（ゲストの発言）
- 音声出力: 約5分分（MCの発言）
- テキスト出力: 会話の文字起こし（約3,000-5,000文字）

**トークン数推定**:
- 日本語は1文字 ≈ 1トークン（簡易計算）
- 音声入力: 5分 ≈ 約1,000-1,500トークン（音声はテキストより高コスト）
- 音声出力: 5分 ≈ 約1,000-1,500トークン
- テキスト出力: 3,000-5,000トークン

**コスト計算**:
- Input (Audio): 1,250トークン × $3.00 / 1,000,000 = **$0.00375**
- Output (Audio): 1,250トークン × $12.00 / 1,000,000 = **$0.015**
- Output (Text): 4,000トークン × $2.00 / 1,000,000 = **$0.008**

**小計**: **約$0.027** (約¥4)

---

### 2. Director AI（会話監視・指示）
**使用**: プレミアムプランのみ、会話中、4-6回呼び出し（会話の流れを監視してMCに指示）
**フリープラン**: 無効（コスト削減のため）

**推定使用量**（1回あたり）:
- Input: 会話履歴（約800-1,500トークン）+ システムプロンプト（約1,500トークン）= 約2,300-3,000トークン
- Output: 指示文（約200-400トークン）

**コスト計算**（1回あたり）:
- Input: 2,650トークン × $3.00 / 1,000,000 = $0.008
- Output: 300トークン × $15.00 / 1,000,000 = $0.0045
- **1回あたり**: 約$0.0125

**5回呼び出しの場合**: 5 × $0.0125 = **約$0.063** (約¥9.5)

---

### 3. 記事生成（Claude Sonnet 4）
**使用**: 会話終了後、1回のみ

**推定使用量**:
- Input: 会話履歴（約3,000-5,000トークン）+ システムプロンプト（約1,000トークン）= 約4,000-6,000トークン
- Output: 生成記事（約3,000-4,500トークン）

**コスト計算**:
- Input: 5,000トークン × $3.00 / 1,000,000 = **$0.015**
- Output: 3,750トークン × $15.00 / 1,000,000 = **$0.05625**

**小計**: **約$0.071** (約¥11)

---

### 4. 画像生成（Gemini 3 Pro Image）
**使用**: プレミアムプランのみ、1回

**コスト計算**:
- 1K/2K画像: **$0.134** (約¥20)
- 4K画像: **$0.24** (約¥36)

**小計**: **約$0.134-0.24** (約¥20-36)

---

### 5. Grounding検索（Director AI内）
**使用**: Director AIが会話中の固有名詞を検索（オプション）

**推定使用量**:
- 1記事あたり2-3回の検索
- Input: 約100トークン/回
- Output: 約200トークン/回

**コスト計算**（3回の場合）:
- Input: 300トークン × $0.50 / 1,000,000 = $0.00015
- Output: 600トークン × $2.00 / 1,000,000 = $0.0012

**小計**: **約$0.001** (約¥0.15) - ほぼ無視できるレベル

---

## 合計コスト（1記事あたり）

### フリープラン（画像生成なし、Director AI有効）
| 項目 | コスト（USD） | コスト（円）* |
|------|--------------|--------------|
| Gemini Live | $0.027 | ¥4 |
| Director AI | $0.063 | ¥9.5 |
| 記事生成 | $0.071 | ¥11 |
| Grounding検索 | $0.001 | ¥0.15 |
| **合計** | **約$0.162** | **約¥24.5** |

*為替レート: 1USD = 150円で計算

### プレミアムプラン（画像生成あり、Director AIあり）
| 項目 | コスト（USD） | コスト（円）* |
|------|--------------|--------------|
| Gemini Live | $0.027 | ¥4 |
| Director AI | $0.063 | ¥9.5 |
| 記事生成 | $0.071 | ¥11 |
| 画像生成 | $0.134-0.24 | ¥20-36 |
| Grounding検索 | $0.001 | ¥0.15 |
| **合計** | **約$0.30-0.41** | **約¥45-61** |

---

## 月間コスト試算

### フリープラン（週1記事、月4記事）
- **1記事**: 約¥24.5
- **月間**: 4記事 × ¥24.5 = **約¥98**

### プレミアムプラン（週7記事、月28記事）
- **1記事**: 約¥45-61（画像生成あり）
- **月間**: 28記事 × ¥53（平均） = **約¥1,484**

---

## 収益性分析

### フリープラン
- **月額料金**: ¥0
- **コスト**: 約¥98/月
- **収益**: **-¥98/月**（赤字、ただし許容範囲）

### プレミアムプラン
- **月額料金**: ¥1,280
- **コスト**: 約¥1,484/月
- **収益**: ¥1,280 - ¥1,484 = **-¥204/月**（赤字、改善）

---

## コスト削減の提案

### 1. フリープランでDirector AIを無効化（実装済み）
- フリープランではDirector AIを無効化することで約¥9.5/記事削減
- 対話時間を10分に短縮（実装済み）

### 2. Director AIの呼び出し頻度の最適化
- 5回 → 4回に削減すると約20%削減（約¥2削減）

### 3. 記事生成の最適化
- より短い記事（2,000-3,000字）を生成すると約20%削減

### 4. 画像生成の最適化
- 1K/2K画像のみ使用（4Kは使わない）で約44%削減

### 最適化後のコスト（プレミアムプラン）
- **1記事**: 約¥40-45
- **月間（28記事）**: 約¥1,120-1,260
- **収益**: ¥980 - ¥1,190 = **-¥210/月**（改善）

---

## 注意事項

1. **為替レート**: 1USD = 150円で計算（実際のレートに応じて変動）
2. **使用量の変動**: 対話時間や会話の長さによって変動する可能性あり
3. **API料金の変更**: 各APIの料金は変更される可能性がある
4. **トークン数の推定**: 実際の使用量は会話内容によって変動する

---

## 推奨事項

1. **段階的な料金設定**: 初期は低価格で開始し、コストが明確になったら調整
2. **使用量の監視**: 実際の使用量を追跡して、コストを正確に把握
3. **最適化の継続**: APIの呼び出し頻度や使用量を最適化
4. **プレミアムプランの価格**: 現在¥1,280に設定済み。約¥200の赤字だが、許容範囲内
